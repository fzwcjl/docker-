> 不同服务器的docker节点没有组成集群，在不同节点部署postgresql容器，如何让不同节点的postgresql容器组成主从集群，必须要清楚知道容器出口IP地址，因为搭建postgresql主从，在配置文件必须指定具体哪个IP地址可以复制本机机器，因此必须要清楚出口IP

> > 01) 同一台机器的不同docker容器进行通讯，如果通过宿主机映射的端口访问时，服务方记录的请求方的IP地址是什么
> > 02) 不同服务器的docker容器进行通讯时，如果通过宿主机映射的端口访问时，出口IP是什么


### 同一台机器的不同docker容器进行通讯，如果通过宿主机映射的端口访问，通过容器IP地址端口访问时，服务方记录的请求的IP地址是什么

* 使用docker默认的网段创建3个容器，一个是nginx(IP地址是 172.17.0.2 ，映射了宿主机 192.168.35.11 的80端口)，两个是alpine(IP地址分别是 172.17.0.3 和 172.17.0.4 )

|      请求者    |      访问地址     | nginx记录的请求IP |
|    --------   |    ------------  | ------------   |
|   172.17.0.3  | 192.168.35.11:80 |   172.17.0.1   |
|   172.17.0.3  |   172.17.0.1:80  |   172.17.0.3   |
|   172.17.0.3  |   172.17.0.2:80  |   172.17.0.3   |
|   172.17.0.4  | 192.168.35.11:80 |   172.17.0.1   |
|   172.17.0.4  |   172.17.0.1:80  |   172.17.0.4   |
|   172.17.0.4  |   172.17.0.2:80  |   172.17.0.4   |
| 192.168.35.11 | 192.168.35.11:80 | 192.168.35.11  |
| 192.168.35.11 |   localhost:80   |   172.17.0.1   |
| 192.168.35.11 |   172.17.0.1:80  |   172.17.0.1   |
| 192.168.35.11 |   172.17.0.2:80  |   172.17.0.1   |


### 不同宿主机的docker容器通讯，通过对方宿主机映射的端口访问对方，对方记录的请求IP地址是己方宿主机IP地址
* 在宿主机 192.168.35.12 创建nginx容器(映射了宿主机的80端口)，在宿主机 192.168.35.13 创建nginx容器(映射了宿主机的80端口)

|         请求者         |     访问地址      | nginx记录的请求IP |
|  -------------------- | ---------------  | --------------  |
| 192.168.35.12的容器内部 | 192.168.35.13:80 |  192.168.35.12  |
| 192.168.35.13的容器内部 | 192.168.35.12:80 |  192.168.35.13  |
